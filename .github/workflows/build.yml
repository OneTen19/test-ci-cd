# This workflow will build a Swift project
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-swift

name: Build Test

on:
# main Î∏åÎûúÏπòÏóê push ÎêòÎ©¥ Ïã§Ìñâ
  push:
    branches: [ "main" ]
  # pull_request:
  #   branches: [ "main" ]

jobs:
  build:
    name: Build iOS Project
    # jobÏù¥ Ïã§ÌñâÎê† ÌôòÍ≤Ω - macos15 / macos-latestÎäî Î≤ÑÏ†ÑÏóê Îî∞Îùº ÏóêÎü¨Í∞Ä Ï¢Ä ÎÇúÎã§Í≥† Ìï®
    runs-on: macos-15

    env:
      SECRET_XCCONFIG_PATH: Project/app/Config.xcconfig

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    # Config ÏóêÎü¨ Ìï¥Í≤∞ÏùÑ ÏúÑÌï¥ Github Secret ÏÇ¨Ïö©
    - name: Generate Config.xcconfig from secret
      run: |
        echo "${{ secrets.CONFIG_XCCONFIG }}" | base64 --decode > ${{ env.SECRET_XCCONFIG_PATH }}
      
    - name: Build project (Simulator build to avoid codesign) üõ†Ô∏è
      run: |
        xcodebuild clean build \
        -project Test-Study.xcodeproj \
        -scheme Test-Study \
        -destination 'platform=iOS Simulator' \
        CODE_SIGNING_ALLOWED=NO
